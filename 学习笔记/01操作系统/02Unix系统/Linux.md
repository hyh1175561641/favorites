





[TOC]





临时放命令的地方

su

exit

mkdir

touch

cd

cat



# 计算机概论







# Linux的起源于发展





# 安装与配置



# 账号与群组

## 系统账号

当我们登录账号的时候，计算机会识别你的ID，而你的ID与账号就在/etc/passwd中

每个文件都具有拥有人和拥有组，文件属性记录的是数字，显示文件属性时，系统根据/etc/passwd和/etc/group的内容显示出来，如果查询不到，文件属性直接显示一个数字

每个登录的用户至少都有两个ID，一个是用户ID（User ID，UID），一个是用户组ID（Group ID，GID）



**/etc/passwd文档结构**

系统上的账号和一般身份用户与root账户

**/etc/shadow文档结构**

记录了账号的密码

**/etc/group文档结构**

记录了组名

## 账号管理



## 切换账号



## 使用者信息





# 文件权限和目录

Linux文件名最长255字节，避免使用特殊符号，以点开头的文件是隐藏文件

Linux文件拓展名与属性无关，但是仍然借助拓展名可以了解该文件是什么种类：.sh是脚本或批处理文件。Z .tar .tar.gz .zip .tgz是经过打包的压缩文件（gunzip，tar等）。

## 用户和用户组

**用户和用户组的概述**

Linux是个多人多用户系统，文件权限是一个非常健全的安全防护措施。为了限制自己，用户组及其他人的使用，Linux有用户和用户组，每一个文件都有三种属性。账号使用一个文件时，先判断自己是否为文件的拥有者，再判断是否是组员，如果都不是，则为其他人。root具有最高权限，可以做任何事情

注意：

- 任何一个文件都具有用户(User)，群组(Group)，其他人(Others)三种身份的权限

- 账号可以有多个用户组

## Linux文件权限

**Linux文件权限的属性**

###### ls命令

显示目录内容

```bash
ls [-alrtAFR] [name...]
-a 显示所有的文件和目录，包括名称开头为"."的隐藏档
-l 将文件形态、权限、拥有者、文件大小的详细列表列出
-r 将文件以相反的次序显示（默认次序是英文字母次序）
-t 将文件依建立时间先后次序列出
-d 仅显示目录名，而不显示目录下的内容列表。显示符号链接文件本身，而不显示其所指向的目录列表
-A 同-a，但是不列出"."和".."（当前目录和父目录）
-F 在列出的文件名称之后加一个符号，可执行档加"*"，目录加"/"
-R 若目录下有文件夹，所有文件夹的所有文件都列出
--full-time 列出完整的时间格式，包括年月日时间和时区
--help 帮助
常用方法：
ls -al 当前目录下的所有文件的详细信息
```

```bash
# 示例
[root@hyh /]# ls -al
total 68
dr-xr-xr-x. 18 root root  4096 Dec 15 02:11 .
dr-xr-xr-x. 18 root root  4096 Dec 15 02:11 ..
-rw-r--r--   1 root root     0 Oct  8 09:17 .autorelabel
lrwxrwxrwx.  1 root root     7 Oct  8 17:13 bin -> usr/bin
dr-xr-xr-x.  5 root root  4096 Dec 17 03:21 boot
drwxr-xr-x  19 root root  2960 Dec 15 12:31 dev
drwxr-xr-x. 79 root root  4096 Dec 17 03:48 etc
drwxr-xr-x.  3 root root  4096 Dec 15 12:24 home
lrwxrwxrwx.  1 root root     7 Oct  8 17:13 lib -> usr/lib
lrwxrwxrwx.  1 root root     9 Oct  8 17:13 lib64 -> usr/lib64
drwx------.  2 root root 16384 Oct  8 17:13 lost+found
drwxr-xr-x.  2 root root  4096 Apr 11  2018 media
drwxr-xr-x.  2 root root  4096 Apr 11  2018 mnt
drwxr-xr-x.  2 root root  4096 Apr 11  2018 opt
dr-xr-xr-x  87 root root     0 Dec 15 12:31 proc
dr-xr-x---.  5 root root  4096 Dec 17 03:47 root
drwxr-xr-x  24 root root   660 Dec 17 03:48 run
lrwxrwxrwx.  1 root root     8 Oct  8 17:13 sbin -> usr/sbin
drwxr-xr-x.  2 root root  4096 Apr 11  2018 srv
dr-xr-xr-x  13 root root     0 Dec 17 03:26 sys
drwxrwxrwt.  9 root root  4096 Feb 17 08:17 tmp
drwxr-xr-x. 13 root root  4096 Oct  8 17:13 usr
drwxr-xr-x. 19 root root  4096 Oct  8 09:17 var
```

```bash
drwxr-xr-x. 19 root root  4096 Oct  8 09:17 var
# 上面的示例中，文件属性依次是
# 权限drwxr-xr-x. 链接19 拥有者root 用户组root 文件容量4096 日期Oct  8 09:17 文件名var
```

第一列是文件的类型与权限，共有十个字符

- 第一个字符是指文件的类型
- 当为[d]，则是目录
- 当为[-]，则是常规文件
  - 纯文本文件，可以直接读取
  - 二进制文件，系统仅认识的文件
  - 数据文件，特定格式的文件
- 当为[l]，则是链接目录
- 当为[b]，则是块设备文件，可供存储的周边设备，随机存取的接口设备。/dev目录下，如/dev/sda
- 当为[c]，则是字符设备文件，串行端口设备，一次性读取，不能截断输出。列如键盘，鼠标，/dev目录下
- 当为[s]，则是套接字文件，通常用在网络数据连接，服务器监听，客户端就可以通过这个接口进行数据沟通，最常在/var/run目录中看到
- 当为[p]，则是管道文件，特殊的文件类型，解决多个程序同时存取一个文件所造成的错误。FIFO是first-in-first-out(先进先出)的缩写
- 接下来的九个字符，三个为一组，代表文件的权限
- 第一组是文件拥有者的权限，第二组是加入用户组，第三组是其他账号
- 三组都是rwx组合，r(read)代表可读，w(write)代表可写，x(execute)代表可执行，如果没有权限则出现[-]

第二列代表有多少文件名链接到此节点(inode)，

第三列表示这个文件拥有者的账号

第四列表示这个文件的所属用户组

第五列表示这个文件的容量大小，默认单位为Bytes

第六列表示这个文件的最近修改日期

第七列显示文件名

注意：

- 如果提示permission deny，权限设置错误
- 不论用户组是什么，账号是最主要的主角
- 目录与文件的权限意义不同，对于目录来说，可读代表目录下的文件，可写代表新建删除重命名目录下的文件，可执行代表可以切换工作目录

**目录与文件权限的意义**

文件权限：文件是实际含有数据的地方，包括一般文本文件，数据库文件，二进制可执行文件（binary program）等。

- r（read）可读取此文件的实际内容，如读取文本文件的文字内容
- w（write）可以写入编辑新增或修改文件的内容
- x（execute）该文件具有可被系统执行的权限

目录权限：目录主要的内容在记录文件名列表，文件名与目录有强烈的关联

- r（read contents in directory）表示具有读取目录结构列表的权限，ls命令
- w（modify contents in directory）表示具有改动目录结构列表的权限，与该目录下的文件名变动有关。建立新文件或目录，删除文件或目录，重命名文件或目录，移动该目录内的文件、目录位置
- x（access directory）表示用户能否进入该目录成为工作目录，cd命令。

注意：

- 要开放目录给任何人浏览时，至少要有rx权限，w权限谨慎开放
- 只有r权限时，ls -al可查询文件名，文件属性无法查看

**Linux文件权限的修改**

若要修改文件的第一列权限，第三列拥有者，第四列用户组，使用下面三个命令

###### chmod命令

修改文件的权限，SUID、SGID、SBIT等特性

chmod数字修改法，r用4代表，w用2代表，x用1代表

chmod符号修改法，u代表用户 g代表组 o代表其他 a代表所有，rwx代表要改变的权限，+加入 -移除 =设置

```bash
chmod
-R 进行递归修改，将目录下的所有子文件子目录都更新
常用方法：
chmod 754 test.sh # 执行文件，其他人可以运行但不能修改
chmod 664 text.txt # 普通文本文件，可修改，其他人只能阅读
chmod u=rwx go=rx test.sh # 执行文件，可修改可执行，其他人不能修改
chmod a+w text.txt # 所有人可写入
chmod a-x test.sh # 所有人都不可执行
```

###### chown命令

修改文件的拥有者，账号必须是已经存在的，还可以顺便修改用户组

```bash
chown
-R 进行递归修改，将目录下的所有子文件子目录都更新为这个拥有者
常用方法：
chown ownername file
chown ownername:groupname file
```

###### chgrp命令

修改文件的用户组，用户组必须是已经存在的

```bash
chgrp
-R 进行递归修改，将目录下的所有子文件子目录都更新为这个用户组
常用方法：
chgrp groupname file
```

**Linux文件权限的重要性**

文件权限最大重要性的是在数据安全性上面。可以保护系统功能，防止系统文件被修改或删除。可以团队协同开发。可以防止不明人士捣乱

## Linux目录配置FHS

FHS (Filesystem Hierarchy Standard) ，文件系统层次标准，Linux目录配置方法

每个独立的软件开发商，操作系统制作者以及想要维护系统的用户，都能遵循FHS标准。FHS重点在于规范每个特定的目录下应该要放置什么样的数据。

FHS依据文件系统使用是否频繁和是否允许用户随意更改，将目录定义成四种交互作用的形态

|          | 可分享（shareable）       | 不可分享（unshareable） |
| -------- | ------------------------- | ----------------------- |
| 不变     | /usr（软件存放处）        | /etc（配置文件）        |
| static   | /opt（第三方辅助软件）    | /boot（启动与内核文件） |
| 可变动   | /var/mail（用户邮箱）     | /var/run（程序相关）    |
| variable | /var/spool/news（新闻组） | /var/lock（程序相关）   |

- 可分享：可以分享给其他系统挂载使用的目录，是能够分享给网络上其他主机挂载用的目录，包括执行文件与用户的邮件等数据
- 不可分享：自己机器上面运行的设备文件或是与程序有关的socket文件等，仅与自身机器有关，不适合分享给其他主机
- 不变：有些数据不会经常变动，跟随发行版而不变动。如函数库，文件说明，系统管理员管理的主机服务配置文件等
- 可变动：经常修改的数据，列如日志文件，一般用户可自行接收的新闻组等

FHS针对目录树架构仅仅定义了这三个目录下放置的数据，这三个分别是：

- /（root，根目录）：与启动系统有关
- /usr (Unix software resource)：与软件安装/执行有关
- /var (variable)：与系统运行过程有关

### /根目录下的内容

根目录不仅衍生出来了所有的目录，同时根目录也与启动、还原、系统修复等操作有关。由于系统启动时需要特定的启动软件、内核文件、启动所需的程序、函数库等文件数据，若系统出现错误时，根目录也必须要包含有能够修复文件系统的程序才行。因此FHS标准建议：根目录所在分区应该越小越好，且应用程序所安装的软件最好不要与根目录放在同一个分区内，保持根目录越小越好。这样不但性能较佳，根目录所在的文件系统也较不容易发生问题

FHS定义根目录下必须要有下面这些目录，即使没有物理目录，也至少要有链接（link）目录。

**FHS要求必须要存在的目录**

- /bin系统有很多存放执行文件的目录，但/bin比较特殊。因为/bin放置的是在单人维护模式下还能够被使用的命令。在/bin下面的命令可以被root与一般账号所使用，主要有：cat、chmod、chown、date、mv、mkdir、cp、bash等常用的命令

- /boot这个目录主要在放置启动会使用到的文件，包括Linux内核文件以及启动选项与启动所需配置文件等。Linux内核常用的文件名为：vmlinuz，如果使用的是grub2这个启动引导程序，则还会存在/boot/grub2/这个目录

- /dev在Linux系统上，任何设备与接口设备都是以文件的形式存在于这个目录当中。只要你通过读写这个目录下面的某个文件，就等于读写某个设备，比较重要的文件有/dev/null、/dev/zero、/dev/tty、/dev/loop\*、/dev/sd\*等

- /etc系统主要的配置文件几乎都放在这个目录内，例如人员的账号密码文件、各种服务的启动文件等。一般来说，这个目录下的各文件属性是可以让一般用户查看的，但是只有root有权利修改。FHS建议不要放置可执行文件在这个目录。比较重要的文件有：/etc/modprobe.d/、/etc/passwd、/etc/fatab、/etc/issue等。

  - 另外FHS还规范几个重要的目录最好要存在/etc/目录下
  - /etc/opt（必要）：这个目录在放置第三方辅助软件/opt的相关配置文件
  - /etc/X11/（建议）：与X Window有关的各种配置文件都在这里，尤其是xorg.conf这个X Server的配置文件

  - /etc/sgml/（建议）：与SGML格式有关的各项配置文件
  - /etc/xml/（建议）：与XML格式有关的各项配置文件

- /lib系统的函数库非常多，而/lib放置的则是在启动时会用到的函数库，以及在/bin或/sbin下面的命令会调用的函数库而已。什么是函数库？你可以将它想成是外挂，某些命令必须要有这些外挂才能够顺利完成程序的执行之意，另外FSH还要求下面的目录必须要存在：/lib/modules/:这个目录主要放置可抽换式的内核相关模块（驱动程序）

- /media是媒介的英文，顾名思义，这个/media下面放置的就是可删除的设备，包括软盘，光盘，DVD等设备都暂时挂载于此。常见的文件名有：/media/floppy、/media/cdrom等

- /mnt如果你想要暂时挂载某些额外的设备，一般建议你可以放置到这个目录中。在早些时候，这个目录的用途与/media相同。只是有了/media之后，这个目录就暂时用来挂载

- /opt这个是给第三方辅助软件放置的目录，什么是第三方辅助软件？举例来说，KDE这个桌面管理系统是一个独立的软件，不过它可以安装到Linux系统中，因此KDE的软件就建议放置到此目录下。另外，如果你想要自行安装额外的软件（非原本的发行版提供），那么也能够将你的软件安装到这里来。不过，以前的Linux系统中，我们还是习惯放置在/usr/local目录下

- /run早期的FHS规定系统启动后所产生的各项信息应该要放置到/var/run目录下，新版的FHS则规范到/run下面，由于/run可以使用内存来模拟，因此性能上会好很多

- /sbinLinux有非常多命令是用来设置系统环境的，这些命令只有root才能够用来设置系统，其他用户最多只能用来查询而已。放在/sbin下面的为启动过程中所需要的，里面包括了启动、修复、还原系统所需要的命令。至于某些服务器软件程序，一般则放置到/usr/sbin/当中。至于本机自行安装的软件所产生的系统执行文件 (system binary)，则放置到/usr/local/sbin/当中了。常见的命令包括：fdisk、fsck、ifconfig、mkfs等

- /srv可以视为service的缩写，是一些网络服务启动之后，这些服务所需要使用的数据目录，常见的服务例如WWW、FTP等。举例来说，WWW服务器需要的网页数据就可以放置在/srv/www/里面。不过，系统的服务数据如果尚未要提供给因特网任何人浏览的话，默认还是建议放置到/var/lib下面即可

- /tmp这是让一般用户或是正在执行的程序暂时放置文件的地方。这个目录是任何人都能够存取的，所以你需要定期地清理一下。当然，重要数据不可放置在此目录。因为FHS甚至建议在启动时，应该要将/tmp下的数据都删除

- /usr第二层FHS设置，见下文。是Unix Software Resource的缩写

- /var第二层FHS设置，主要为放置变动性的数据，见下文。是variable的缩写

**FHS建议可以存在的目录**

- /home这是系统默认的用户家目录 (home directory)。在你新增一个一般用户账号时，默认的用户家目录都会规范到这里来，比较重要的是家目录有两种代号：~代表当前用户的家目录，~username代表username的家目录。
- /lib\<qual\>用来存放与/lib不同的格式的二进制函数库，例如支持64位的/lib64函数库等
- /root系统管理员 (root)的家目录，之所以放在这里，是因为如果进入单人维护模式而仅挂载根目录时，该目录就能够拥有root的家目录，所以我们会希望root的家目录与根目录放置在同一个分区中

**FHS以外的Linux目录**

- /lost+found这个目录是使用标准的ext2、ext3、ext4文件系统格式才会产生的一个目录，目的在于当文件系统发生错误时，将一些遗失的片段放置到这个目录下，不过如果使用的是xfs文件系统的话，就不会存在这个目录
- /proc这个目录本身是一个虚拟文件系统 (virtual filesystem)，它放置的数据都是在内存当中，例如系统内核、进程信息 (process)、外接设备的状态及网络状态等。因为这个目录下的数据都是在内存当中，所以本身不占任何硬盘空间。比较重要的文件例如：/proc/cpuinfo、/proc/dma、/proc/interrupts、/proc/ioports、/proc/net/\*等
- /sys这个目录其实跟/proc非常类似，也是一个虚拟的文件系统，主要也是记录内核与系统硬件信息相关的内容。包括目前已加载的内核模块与内核检测到的硬件设备信息等，这个目录同样不占硬盘容量

### /usr下的内容

根据FHS的基本定义，是Unix Software Resource的缩写

**FHS要求必须要存在的目录**

- /usr/bin
- /usr/lib
- /usr/local
- /usr/sbin
- /usr/share

**FHS建议可以存在的目录**

- /usr/games
- /usr/include
- /usr/libexec
- /usr/lib\<qual\>
- /usr/src



### /var下的内容

是variable的缩写

**FHS要求必须要存在的目录**

- /var/cache
- /var/lib
- /var/lock
- /var/log
- /var/mail
- /var/run
- /var/spool



## 目录与路径

**目录树**

在Linux下面，所有文件与目录都是由根目录开始的，然后一个一个的分支下来，像是一个树的形状。因此我们称这种目录配置方式为目录树（directory tree）。

- 目录树的起始点是根目录（/，root）
- 每一个目录不止能使用本地分区的文件系统，也可以使用网络上的文件系统。比如，可以使用NFS (Network File System)服务器挂载某特定目录等
- 每一个文件在此目录树的文件名（完整路径）都是独一无二的

**相对路径与绝对路径**

根据文件名写法不同，可分为相对路径（relative）与绝对路径（absolute）

绝对路径：由根目录(/)开始写起的文件名或目录名称，这样对强调文件名的准确性比较好（写脚本，计划任务at cron的时候用）

相对路径：相对于当前路径的文件名写法，是以当前所在路径的相对位置来表示的

两个特殊的目录

一个点.代表当前的目录，也可以用./来表示

两个点..代表上一层的目录，也可以../来表示



小横杠-代表前一个工作目录

波浪线~代表当前使用者身份所在的家目录

~account代表account这个使用者的的家目录

## 文件与目录管理

**文件与目录**

ls命令，见上文

###### cd命令

切换目录，是change directory的缩写

```bash
cd 绝对路径或相对路径

常用方法：
cd # 回到家目录
cd ~ # 回到家目录
cd ~account # 切换到account目录
```

###### pwd命令

显示当前目录

```bash

```

###### mkdir命令

建立一个新目录

```bash

```

###### rmdir命令

删除一个空目录

```bash

```

**复制删除与移动**

###### cp命令

复制文件

```bash
cp 选项 参数
-a 
-R/r 递归处理，将指定目录下的所有文件与子目录一并处理；
--help
常用方法：
cp 源文件 目标文件
cp -R 源目录 目标目录 cp不能复制目录，必须加-R选项
```



###### rm命令



```bash

```

###### mv命令



```bash

```

## 查看文件内容



###### cat命令



```bash

```

###### tac命令



```bash

```

###### nl命令



```bash

```

###### more命令



```bash

```

###### less命令



```bash

```

###### head命令



```bash

```

###### tail命令



```bash

```

###### od命令



```bash

```

## 命令与文件查找



```bash

```

which



```bash

```

find



# BASH使用者界面



## 正则表达式



## shell脚本

见其他文件







###### source命令

```bash

```



###### alias命令

设置命令别名

```bash

```





###### unalias命令

取消命令别名

```bash

```



# 磁盘与文件系统









# 进程管理和SELinux









# 系统服务daemon









# 计划任务和日常维护





# 日志文件









# 启动流程









# 软件安装







# 文件的压缩

计算机上比较大型的文件通过文件压缩之后，可以降低磁盘使用量，从而达到降低文件容量的效果。有的压缩程序还可以限制容量，把一个大型文件划分成数个小型文件，方便携带。

若要使用这些被压缩过的文件数据，必须将它解压缩成未压缩之前的模样。压缩后与压缩文件所占用的磁盘空间大小，就可以被称为是压缩比，参考链接：[RFC 1952文件 GZIP文件格式规格4.3版本](https://www.ietf.org/rfc/rfc1952.txt)。

压缩后的文件容量会变小，可以容纳更多数据。在网络传输中，会降低数据量，提高带宽利用率。其中纯文本文件的多余空间最多

## 压缩命令

在linux环境中，压缩文件的扩展名大多是：

```
*.Z  compress程序压缩的文件
*.zip  zip程序压缩的文件
*.gz  gzip程序压缩的文件
*.bz2  bzip2程序压缩的文件
*.xz  xz程序压缩的文件
*.tar  tar程序打包文件，没有压缩过
*.tar.gz  tar程序打包文件，并且经过gzip的压缩
*.tar.bz2  tar程序打包文件，并且经过bzip的压缩
*.tar.xz  tar程序打包文件，并且经过xz的压缩
```

Linux支持非常多的压缩命令，这些文件彼此之间可能无法互通压缩/解压缩文件

Linux上常见的压缩命令就是gzip、bzip和最新的xz，和已经不流行的compress。为了支持Windows常见的zip，Linux也有了zip命令。不过，这些命令通常仅能针对一个文件来压缩和解压缩。

tar命令可以将很多文件打包成一个文件甚至目录。单纯的tar仅能提供打包的功能，并没有提供压缩的功能。但是强大的tar命令与压缩功能结合起来，提供给用户更方便的功能

###### gzip命令

gzip  zcat  zmore  zless  zgrep

```bash

```



###### bzip2命令

```bash

```

###### xz命令

```bash

```

###### tar命令

可以将多个文件或目录包成一个大文件，是一种打包命令，同时还能通过gzip、bzip2、xz的支持，将文件同时进行压缩。tar的使用非常广泛

```bash

```







# 系统设置与备份







# 图形界面













# 内核编译与管理









# 其他

不仅有FHS标准，也有lsb标准（出处：鸟哥，5.3.4介绍）





# 英语单词





invalid 无效的，残疾的，有病的

deny 否定，否认，拒绝

permission 允许，许可，权限

# 参考书目

《鸟哥的Linux私房菜 基础学习篇（第四版）》鸟哥著，人民邮电出版社 ISBN 978-7115472588

# 链接

[鸟哥的Linux私房菜网页版](http://linux.vbird.org)

[Linux命令大全](https://www.runoob.com/linux/linux-command-manual.html)